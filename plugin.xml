<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0"
    id="cordova-plugin-change-app-info"
    version="2.9.7">
    
    <name>Change App Info (iOS Optimized)</name>
    <description>Cordova plugin to change app package name, display name, version and icon from CDN at build time. iOS build optimized with 3 standalone unified hooks (no legacy dependencies). Supports splash screen and webview background color customization.</description>
    <license>MIT</license>
    <keywords>cordova,app,info,package,displayname,version,icon,ios,android,cdn,optimized,standalone,unified</keywords>
    
    <author>vnkhoado</author>
    <repo>https://github.com/vnkhoado/cordova-plugin-change-app-info.git</repo>
    
    <engines>
        <engine name="cordova" version=">=9.0.0" />
    </engines>
    
    <!-- Optional Dependencies -->
    <!-- SQLite: Only needed if you want to store build info in database -->
    <!-- <dependency id="cordova-sqlite-storage" version="^6.1.0" /> -->
    
    <!-- Image Processing: Install ONE of these for CDN icon generation -->
    <!-- npm install sharp (recommended, faster) -->
    <!-- npm install jimp (fallback, pure JS) -->
    
    <!-- Configuration Preferences:
         
         App Configuration:
         - APP_NAME: App display name (e.g., "MyApp")
         - VERSION_NUMBER: Version string (e.g., "1.0.0")
         - VERSION_CODE: Build number (e.g., "1")
         - CDN_ICON: Icon URL (e.g., https://cdn.com/icon-1024.png)
         
         Runtime Configuration:
         - API_HOSTNAME: API hostname (e.g., "api.myapp.com")
         - ENVIRONMENT: Environment name (e.g., "production")
         
         UI Customization:
         - SplashScreenBackgroundColor: Splash background (e.g., "#001833")
         - WEBVIEW_BACKGROUND_COLOR: Webview background (e.g., "#001833")
         
         MABS Override:
         - OLD_COLOR: Previous MABS theme color (e.g., "#FF8751") - defaults to #FF8751
         
         Build Notification:
         - ENABLE_BUILD_NOTIFICATION: "true" or "false"
         - BUILD_SUCCESS_API_URL: Notification endpoint
         - BUILD_API_BEARER_TOKEN: Bearer token
    -->
    
    <!-- Android Platform - Keep original hooks (working well) -->
    <platform name="android">
        <hook type="before_prepare" src="hooks/backupAppInfo.js" />
        <hook type="after_prepare" src="hooks/changeAppInfo.js" />
        <hook type="after_prepare" src="hooks/generateIcons.js" />
        <hook type="after_prepare" src="hooks/injectBuildInfo.js" />
        <hook type="after_prepare" src="hooks/customizeSplashScreen.js" />
        <hook type="after_prepare" src="hooks/customizeWebview.js" />
        <hook type="before_compile" src="hooks/forceOverrideSplashColor.js" />
        <hook type="before_compile" src="hooks/forceOverrideNativeColors.js" />
        <hook type="before_compile" src="hooks/scanAndReplaceColor.js" />
        <hook type="post_compile" src="hooks/forceMBASSplashColor.js" />
        <hook type="after_build" src="hooks/sendBuildSuccess.js" />
    </platform>
    
    <!-- iOS Platform - OPTIMIZED: 3 standalone unified hooks -->
    <platform name="ios">
        <!-- All iOS functionality in 3 standalone hooks (no legacy dependencies) -->
        <hook type="after_prepare" src="hooks/ios/unified-prepare-standalone.js" />
        <hook type="before_compile" src="hooks/ios/unified-compile.js" />
        <hook type="post_compile" src="hooks/forceMBASSplashColor.js" />
        <hook type="before_build" src="hooks/ios/unified-build.js" />
        <hook type="after_build" src="hooks/sendBuildSuccess.js" />
        
        <!-- iOS Configuration - Safe approach -->
        <config-file target="*-Info.plist" parent="CFBundleIconName">
            <string>AppIcon</string>
        </config-file>
    </platform>
</plugin>